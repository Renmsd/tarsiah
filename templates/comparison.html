<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ููุงุฑูุฉ ุงูุนุฑูุถ | Smart RFP AI</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='comparison.css') }}" />
</head>

<body>
  <!-- ๐น ุงูููุฏุฑ -->
  <header class="topbar">
    <div class="topbar-right">
      <a href="/" class="logo">
          <img src="{{ url_for('static', filename='images/logo2.png') }}" alt="Tarsiah Logo" />
      </a>
    </div>
    <nav class="topbar-center">
      <a href="/" id="nav-home">ุงูุฑุฆูุณูุฉ</a>
      <a href="/rfp_input" id="nav-generate">ุฅูุดุงุก RFP</a>
      <a href="/comparison" class="active" id="nav-compare">ููุงุฑูุฉ ุงูุนุฑูุถ</a>
    </nav>
  </header>

  <!-- ๐ ูุญุชูู ุงูุตูุญุฉ -->
  <div class="page-container">
    <!-- ๐ฃ ูุณุงุฑ: ุฑูุน ุงููููุงุช -->
    <aside class="left-panel">
      <form id="compareForm" method="POST" enctype="multipart/form-data" action="/compare_llm">
        <label>ูุฑุงุณุฉ ุงูุดุฑูุท (RFP):</label>
        <input type="file" id="rfp_file" name="rfp_file" accept=".pdf,.txt" required />

        <label>ุงูุนุฑูุถ (Proposals):</label>
        <input type="file" id="proposal_files" name="proposal_files" multiple accept=".pdf,.txt" required />

        <button type="submit"> ุญููู ุงูุงู</button>
      </form>
    </aside>

    <!-- โช ูููู: ุงููุต ุงูุชุนุฑููู ุฃู ุงููุชุงุฆุฌ -->
    <main class="right-panel">
      <!-- โจ ุงููุต ุงูุชุนุฑููู ูุจู ุฑูุน ุงููููุงุช -->
      <div id="intro-box" {% if results %}style="display:none;"{% endif %}>
        <h1> ุญููู ุนุฑูุถู ุจุณูููุฉ ูุฏูุฉ.</h1>
        <p>ูู ุจุฑูุน <strong>ูุฑุงุณุฉ ุงูุดุฑูุท (RFP) ูุงูุนุฑูุถ (Proposals)ุ </strong>  ูุณููุฏูู ูู ุงููุธุงู ููุงุฑูุฉ ูุงุถุญุฉ ุชุฏุนู ุงุชุฎุงุฐ ุงููุฑุงุฑ.</p>
        <h2>ุงุจุฏุฃ ุงูุขู ุจุฑูุน ุงููููุงุช</h2>
      </div>

      <!-- ๐ ูุชุงุฆุฌ ุงูููุงุฑูุฉ -->
      <div id="results-section" {% if results %}style="display:block;"{% else %}style="display:none;"{% endif %}>
        <h2>ูุชุงุฆุฌ ููุงุฑูุฉ ุงูุนุฑูุถ</h2>

        {% if results %}
          {% for item in results %}
          <div class="proposal-card">
            <h3>{{ item.proposal_name }}</h3>

            <table class="summary-table">
              <tr>
                <th>ุงููุนูุงุฑ</th>
                <th>ุงูุฏุฑุฌุฉ</th>
              </tr>
              {% for score_item in item.scores %}
              <tr>
                <td>{{ score_item.criterion }}</td>
                <td>{{ score_item.score }}</td>
              </tr>
              {% endfor %}
            </table>

            <p class="overall-comment"><strong>๐ฌ ุงูุชุนููู ุงูุนุงู:</strong> {{ item.overall_comment }}</p>

            <div class="arrow-toggle" onclick="toggleDetails('details{{ loop.index }}', this)">โ</div>

            <div id="details{{ loop.index }}" class="details">
              <p>{{ item.details }}</p>
            </div>
          </div>
          {% endfor %}
        {% else %}
          <p class="no-results">โ๏ธ ูู ูุชู ุงูุนุซูุฑ ุนูู ูุชุงุฆุฌ ููููุงุฑูุฉ.</p>
        {% endif %}
      </div>
    </main>
  </div>
  <script src="{{ url_for('static', filename='comparison.js') }}"></script>
</body>
</html>

